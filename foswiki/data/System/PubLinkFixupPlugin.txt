%META:TOPICINFO{author="ProjectContributor" date="1442191889" format="1.1" version="1"}%
%META:TOPICPARENT{name="Plugins"}%
<!--
One line description, required for extensions repository catalog.
   * Set SHORTDESCRIPTION = For non-utf-8 sites, fix up Pub links to use correct encoding.
-->
---+!! Pub Link Fixup Plugin

%SHORTDESCRIPTION%

%TOC%

This plugin performs pub link fixup of the generated HTML page.  If Foswiki is configured with a
non-utf-8 ={Store}{Encoding}=, then links to /pub files will be generated with the incorrect encoding.

Even on non-utf-8 sites, Foswiki operates fully with UNICODE and utf-8 encoding in the core and on
the web interface.  /pub attachment links will be generated assuming the filesnames are utf-8 encoded.
This plugin provides a completePageHandler that finds utf-8 encoded links to /pub attachments and
re-encodes them to the {Store}{Encoding}.

Enable this plugin to perform the link fixup.  It can be safely enabled regardless of the ={Store}{Encoding}=.
If the Plugin detects that the ={Store}{Encoding}= is =utf-8=, it quietly disables its =completePageHandler=.

This is __not__ a complete fix to the issue.  It is still strongly recommended that sites convert
their Store to utf-8 to avoid these types of encoding issues.

---++ Preferences

This plugin has one expert setting.
   * ={Plugins}{PubLinkFixupPlugin}{Debug}=. Enable to record before/after of each rewritten link to the Foswiki debug log.

---++ Installation
You do not need to install anything in the browser to use this extension. The following instructions are for the administrator who installs the extension on the server.

Open configure, and open the "Extensions" section. "Extensions Operation and Maintenance" Tab -&gt; "Install, Update or Remove extensions" Tab.  Click the "Search for Extensions" button.  
Enter part of the extension name or description and press search.   Select the desired extension(s) and click install. If an extension is already installed, it will *not* show up in the
search results.

You can also install from the shell by running the extension installer as the web server user: (Be sure to run as the webserver user, not as root!)
<verbatim>
cd /path/to/foswiki
perl tools/extension_installer <NameOfExtension> install
</verbatim>

If you have any problems, or if the extension isn't available in =configure=, then you can still install manually from the command-line. See https://foswiki.org/Support/ManuallyInstallingExtensions for more help.


---++ Info

|  Change&nbsp;History: | <!-- versions below in reverse order -->&nbsp; |
|  1.00 (14 Sep 2015): | Initial version |

%META:FORM{name="PackageForm"}%
%META:FIELD{name="Author" title="Author" value="GeorgeClark"}%
%META:FIELD{name="Version" title="Version" value="1.00"}%
%META:FIELD{name="Release" title="Release" value="14 Sep 2015"}%
%META:FIELD{name="Copyright" value="%$CREATEDYEAR%, GeorgeClark, All Rights Reserved"}%
%META:FIELD{name="License" value="GPL ([[http://www.gnu.org/copyleft/gpl.html][GNU General Public License]])"}%
%META:FIELD{name="Repository" value="https://github.com/foswiki/PubLinkFixupPlugin"}%
%META:FIELD{name="Home" value="http://foswiki.org/Extensions/PubLinkFixupPlugin"}%
%META:FIELD{name="Support" value="http://foswiki.org/Support/PubLinkFixupPlugin"}%
%META:FIELD{name="Repository" title="Repository" value="https://github.com/foswiki/distro"}%
